#   Raft相关知识## Raft最重要的三个概念1.领导选举（Leader Election）    在集群中选出一个leader负责管理日志复制2.日志复制（Log Replication ）    Leader将客户端请求的日志条目复制到集群的其他节点（Follower）3.安全性（Safty）    确保在网络分区或者节点故障的情况下，也能维持日志的一致性### 领导选举在Raft中，集群中的节点可以有三种状态，Follower,Condidate,Leader。正常状态下，一个集群只有一个Leader，其他都是Follower.    --Follower：被动状态，只响应Leader和Condidate的请求    --Leader:负责处理客户端的请求，并将日志条目复制到所有Follower    --Condidate:主动发起选举状态，当Follower超过选举时间没有收到Leader的心跳或者日志请求，会变成Condidate，并发起选举![img.png](img.png)### 日志复制Leader 接收到客户端请求后，将请求作为一个新的日志条目追加到自己的日志中，并并行地向其他节点发送 AppendEntries RPC 以复制日志条目。Follower 收到 AppendEntries RPC 后，会将日志条目追加到自己的日志中，并返回确认。### 安全性为了保证日志的一致性，Raft 采用了几种机制：    --日志匹配属性：如果两个日志在相同的索引位置存储了相同的任期号，那么在这个索引之前的所有日志都相同。    --领导选举中的附加条件：候选者在获得大多数投票前，必须拥有一个包含最新日志条目的日志。    --提交日志条目：一旦 Leader 确认某个日志条目已经复制到大多数节点上，就可以认为该日志条目是被提交的。